name: Deploy my protfolio application on dev server

on:
  push:
    branches:
      - master


jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Use Node.js 16.x
      uses: actions/setup-node@v3
      with:
        node-version: "16.x"
    - run: npm i
    - run: npm run build
      if: ${{ failure() }}
    - name: This build has failed
      run: echo "This build failed"
    - uses: lazy-actions/slatify@master
    - name: Notification
      with:
        type: ${{ job.status }}
        job_name: '*Test*'
        channel: '#self'
        url: ${{ secrets.SLACK_WEBHOOK }}
     run: echo "///"


    # - uses: rtCamp/action-slack-notify@v2
    # - name: Slack notification
    #   env:
    #     SLACK_CHANNEL: general
    #     SLACK_COLOR: ${{ job.status }}
    #     SLACK_ICON: https://github.com/rtCamp.png?size=48
    #     SLACK_MESSAGE: 'Your build faileds '
    #     SLACK_TITLE: Post Title
    #     SLACK_WEBHOOK: https://hooks.slack.com/services/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
     # run: echo "run notification"
  

  deploy:
    needs: build
    name: Dev deployment process
    runs-on: ubuntu-latest
    steps:
      - name: Echo
        run: echo "This step will always run"
